{% extends 'base.html' %}
{% block title %}Trivias | Antioquia Dialoga{% endblock %}
{% block content %}
<h2 class="text-2xl font-semibold mb-4">Trivias Educativas 🧠</h2>
<p class="text-slate-600 mb-6">Pon a prueba tus conocimientos sobre cultura de paz. ¡Gana puntos por cada trivia!</p>

{% if profile %}
<div class="mb-6 bg-emerald-50 border border-emerald-200 rounded-lg p-4">
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div>
      <p class="text-sm text-emerald-700">🧠 Trivias completadas</p>
      <p class="text-2xl font-semibold text-emerald-800">{{ profile.quizzes_completed }}</p>
    </div>
    <div>
      <p class="text-sm text-emerald-700">📊 Disponibles</p>
      <p class="text-2xl font-semibold text-emerald-800">{{ quizzes|length }}</p>
    </div>
    <div class="col-span-2">
      <p class="text-sm text-emerald-700 mb-1">💡 Sistema de puntos</p>
      <ul class="text-xs text-emerald-600 space-y-1">
        <li>• 100% correcto = Puntos completos</li>
        <li>• 80-99% = 80% de puntos</li>
        <li>• 60-79% = 60% de puntos</li>
      </ul>
    </div>
  </div>
</div>
{% endif %}

<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
  {% for quiz in quizzes %}
  <article class="bg-white rounded-2xl shadow-sm overflow-hidden border hover:border-emerald-200 hover:shadow-md transition">
    <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 p-6">
      <div class="flex items-start justify-between mb-3">
        <span class="text-4xl">🧠</span>
        <span class="px-2 py-1 rounded-full text-xs font-medium
          {% if quiz.difficulty == 'easy' %}bg-green-100 text-green-700
          {% elif quiz.difficulty == 'medium' %}bg-yellow-100 text-yellow-700
          {% else %}bg-red-100 text-red-700{% endif %}">
          {{ quiz.get_difficulty_display }}
        </span>
      </div>
      <h3 class="font-semibold text-lg mb-1">{{ quiz.title }}</h3>
      <p class="text-sm text-slate-600 mb-2">{{ quiz.category }}</p>
    </div>
    
    <div class="p-4">
      <p class="text-sm text-slate-700 mb-3">{{ quiz.description|truncatewords:15 }}</p>
      
      <div class="flex items-center justify-between text-xs text-slate-500 mb-3">
        <span>📝 {{ quiz.get_questions_count }} preguntas</span>
        <span>🏆 Hasta {{ quiz.points_reward }} pts</span>
      </div>
      
      <a href="{% url 'quiz_detail' quiz.id %}" class="block w-full text-center px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 font-medium transition">
        Comenzar trivia
      </a>
    </div>
  </article>
  {% empty %}
  <div class="col-span-full">
    <div class="bg-slate-100 rounded-2xl p-8 text-center">
      <p class="text-slate-600 text-lg mb-2">📚 No hay trivias disponibles aún</p>
      <p class="text-slate-500 text-sm">Pronto agregaremos más contenido educativo</p>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}

{% block extra_js %}
<script>
// Custom template filter for dictionary access
document.addEventListener('DOMContentLoaded', function() {
  // Any initialization code can go here
});
</script>
{% endblock %}

