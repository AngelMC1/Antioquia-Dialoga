<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Iniciar Sesión | Antioquia Dialoga</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-emerald-50 via-white to-emerald-50 min-h-screen flex items-center justify-center p-4">
  <div class="max-w-md w-full">
    <!-- Logo y título -->
    <div class="text-center mb-8">
      <div class="inline-flex h-16 w-16 items-center justify-center rounded-full bg-emerald-600 text-white text-3xl mb-4 shadow-lg">
        🌿
      </div>
      <h1 class="text-3xl font-bold text-slate-800 mb-2">Antioquia Dialoga</h1>
      <p class="text-slate-600">Plataforma para la cultura de paz</p>
    </div>

    <!-- Card de login -->
    <div class="bg-white rounded-2xl shadow-xl p-8">
      <!-- Tabs para Login/Registro -->
      <div class="flex gap-2 mb-6 bg-slate-100 rounded-lg p-1">
        <button 
          id="loginTab" 
          onclick="switchTab('login')" 
          class="flex-1 px-4 py-2 rounded-md font-medium transition tab-button active"
        >
          Iniciar Sesión
        </button>
        <button 
          id="registerTab" 
          onclick="switchTab('register')" 
          class="flex-1 px-4 py-2 rounded-md font-medium transition tab-button"
        >
          Registrarse
        </button>
      </div>

      <!-- Mensaje de error -->
      {% if error %}
      <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg">
        <p class="text-red-700 text-sm">{{ error }}</p>
      </div>
      {% endif %}

      <!-- Formulario de Login -->
      <form id="loginForm" method="POST" class="space-y-4">
        {% csrf_token %}
        <input type="hidden" name="action" id="actionInput" value="login">
        
        <div>
          <label for="username" class="block text-sm font-medium text-slate-700 mb-2">
            Nombre de usuario
          </label>
          <input 
            type="text" 
            id="username" 
            name="username" 
            value="{{ suggested_username|default:'' }}"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition"
            placeholder="Tu nombre o nickname"
            required
            autofocus
            maxlength="50"
          />
          <p class="text-xs text-slate-500 mt-1" id="usernameHelp">
            Ingresa tu nombre de usuario para acceder
          </p>
        </div>

        <button 
          type="submit" 
          class="w-full px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-semibold transition shadow-md hover:shadow-lg"
        >
          <span id="buttonText">Iniciar Sesión</span>
        </button>
      </form>

      <!-- Información adicional -->
      <div class="mt-6 pt-6 border-t border-slate-200">
        <div class="text-center text-sm text-slate-600">
          <p class="mb-2">🌿 Sistema simple basado en nombre de usuario</p>
          <p class="text-xs text-slate-500">
            No requiere contraseña. Perfecto para uso educativo.
          </p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="text-center mt-6 text-sm text-slate-500">
      <p>💚 Construyendo paz en Antioquia</p>
    </div>
  </div>

  <script>
    function switchTab(tab) {
      const loginTab = document.getElementById('loginTab');
      const registerTab = document.getElementById('registerTab');
      const actionInput = document.getElementById('actionInput');
      const buttonText = document.getElementById('buttonText');
      const usernameHelp = document.getElementById('usernameHelp');
      
      // Remover clase active de todos los tabs
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active', 'bg-white', 'shadow-sm', 'text-emerald-600');
        btn.classList.add('text-slate-600');
      });
      
      if (tab === 'login') {
        loginTab.classList.add('active', 'bg-white', 'shadow-sm', 'text-emerald-600');
        loginTab.classList.remove('text-slate-600');
        actionInput.value = 'login';
        buttonText.textContent = 'Iniciar Sesión';
        usernameHelp.textContent = 'Ingresa tu nombre de usuario para acceder';
      } else {
        registerTab.classList.add('active', 'bg-white', 'shadow-sm', 'text-emerald-600');
        registerTab.classList.remove('text-slate-600');
        actionInput.value = 'register';
        buttonText.textContent = 'Crear Cuenta';
        usernameHelp.textContent = 'Elige un nombre único (mínimo 2 caracteres)';
      }
    }
    
    // Inicializar tab activo
    document.addEventListener('DOMContentLoaded', function() {
      switchTab('login');
    });
  </script>

  <style>
    .tab-button.active {
      @apply bg-white shadow-sm text-emerald-600;
    }
    
    .tab-button:not(.active) {
      @apply text-slate-600 hover:text-slate-800;
    }
  </style>
</body>
</html>

